{"ast":null,"code":"import _objectSpread from \"/home/harry/project_thea/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/harry/project_thea/src/components/map.js\";\nimport React from \"react\";\nimport ReactMapGL, { Popup } from \"react-map-gl\";\nimport { SensorIcon, SensorBite } from \"./sensor\";\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._onClickMarker = city => {\n      this.setState({\n        popupInfo: city\n      });\n    };\n\n    this._onMarkerDragEnd = event => {\n      this.setState({\n        marker: {\n          longitude: event.lngLat[0],\n          latitude: event.lngLat[1]\n        }\n      });\n    };\n\n    this._onMarkerDragStart = event => {\n      this._logDragEvent('onDragStart', event);\n    };\n\n    this._onMarkerDrag = event => {\n      this._logDragEvent('onDrag', event);\n    };\n\n    this.state = {\n      viewport: {\n        width: \"100%\",\n        height: \"100vh\",\n        latitude: 51.5084,\n        longitude: -2.5927,\n        zoom: 16\n      },\n      events: {}\n    };\n    this.clearPopUp = this.clearPopUp.bind(this);\n  }\n\n  clearPopUp() {\n    this.setState({\n      popupInfo: null\n    });\n  }\n\n  _logDragEvent(name, event) {\n    this.setState({\n      events: _objectSpread({}, this.state.events, {\n        [name]: event.lngLat\n      })\n    });\n  }\n\n  _renderPopup() {\n    const popupInfo = this.state.popupInfo;\n    return popupInfo && React.createElement(Popup, {\n      tipSize: 5,\n      anchor: \"top\",\n      longitude: popupInfo.longitude,\n      latitude: popupInfo.latitude,\n      closeOnClick: false,\n      onClose: this.clearPopUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(SensorBite, {\n      info: popupInfo,\n      add_tab_cb: this.props.add_tab_cb,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }));\n  }\n\n  render() {\n    let sensor_data = this.props.sensor_data;\n    return React.createElement(ReactMapGL, Object.assign({}, this.state.viewport, {\n      onViewportChange: viewport => this.setState({\n        viewport\n      }),\n      mapStyle: \"mapbox://styles/hturner30/ck62e8klf0xzn1ithmmtve3iq\",\n      mapboxApiAccessToken: \"pk.eyJ1IjoiaHR1cm5lcjMwIiwiYSI6ImNrNjJhZWFkdjBiNnMzbm1tNHh1cDNlMWsifQ.0ZiYTbXUCbaJ2mxlibJjDg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), this.state.viewport.zoom >= 15 ? React.createElement(SensorIcon, {\n      data: sensor_data,\n      onClick: this._onClickMarker,\n      onMarkerDragStart: this._onMarkerDragStart(),\n      onMarkerDrag: this._onMarkerDrag(),\n      onMarkerDragEnd: this._onMarkerDragEnd(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }) : null, this._renderPopup());\n  }\n\n}\n\nexport { Map };","map":{"version":3,"sources":["/home/harry/project_thea/src/components/map.js"],"names":["React","ReactMapGL","Popup","SensorIcon","SensorBite","Map","Component","constructor","props","_onClickMarker","city","setState","popupInfo","_onMarkerDragEnd","event","marker","longitude","lngLat","latitude","_onMarkerDragStart","_logDragEvent","_onMarkerDrag","state","viewport","width","height","zoom","events","clearPopUp","bind","name","_renderPopup","add_tab_cb","render","sensor_data"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactMapGL, {Popup} from \"react-map-gl\";\nimport {SensorIcon, SensorBite} from \"./sensor\";\n\nclass Map extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            viewport: {\n                width: \"100%\",\n                height: \"100vh\",\n                latitude: 51.5084,\n                longitude: -2.5927,\n                zoom: 16,\n            },\n            events: {}\n        };\n\n        this.clearPopUp = this.clearPopUp.bind(this);\n    }\n\n    clearPopUp() {\n        this.setState({popupInfo: null})\n    };\n\n    _onClickMarker = city => {\n        this.setState({popupInfo: city});\n    };\n\n    _logDragEvent(name, event) {\n        this.setState({\n              events: {\n                ...this.state.events,\n                [name]: event.lngLat\n              }\n        });\n    }\n\n    _onMarkerDragEnd = event => {\n        this.setState({\n            marker: {\n                longitude: event.lngLat[0],\n                latitude: event.lngLat[1]\n            }\n        });\n    };\n\n    _onMarkerDragStart = event => {\n        this._logDragEvent('onDragStart', event);\n    };\n\n    _onMarkerDrag = event => {\n        this._logDragEvent('onDrag', event);\n    };\n\n\n    _renderPopup() {\n        const {popupInfo} = this.state;\n\n        return (\n            popupInfo && (\n            <Popup\n                tipSize={5}\n                anchor=\"top\"\n                longitude={popupInfo.longitude}\n                latitude={popupInfo.latitude}\n                closeOnClick={false}\n                onClose={this.clearPopUp}\n                >\n                <SensorBite\n                    info={popupInfo}\n                    add_tab_cb={this.props.add_tab_cb}\n                />\n            </Popup>\n            )\n        );\n    }\n\n    render() {\n\n        let { sensor_data } = this.props;\n        return (\n            <ReactMapGL\n                {...this.state.viewport}\n                onViewportChange={(viewport) => this.setState({viewport})}\n                mapStyle='mapbox://styles/hturner30/ck62e8klf0xzn1ithmmtve3iq'\n                mapboxApiAccessToken='pk.eyJ1IjoiaHR1cm5lcjMwIiwiYSI6ImNrNjJhZWFkdjBiNnMzbm1tNHh1cDNlMWsifQ.0ZiYTbXUCbaJ2mxlibJjDg'\n                >\n                {(this.state.viewport.zoom >= 15)\n                    ? <SensorIcon\n                        data={sensor_data}\n                        onClick={this._onClickMarker}\n                        onMarkerDragStart={this._onMarkerDragStart()}\n                        onMarkerDrag={this._onMarkerDrag()}\n                        onMarkerDragEnd={this._onMarkerDragEnd()}\n                    />\n                    : null\n                }\n                {this._renderPopup()}\n            </ReactMapGL>\n            );\n        }\n    }\n\nexport { Map };"]},"metadata":{},"sourceType":"module"}